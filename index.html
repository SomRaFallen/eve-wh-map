<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Информация о Wormhole</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    #info { margin-top: 20px; padding: 15px; border: 1px solid #ccc; background: #fff; border-radius: 8px; }
    input { padding: 5px; font-size: 16px; }
    button { padding: 5px 10px; font-size: 16px; margin-left: 5px; }
</style>
</head>
<body>

<h2>Проверка информации о Wormhole</h2>
<input type="text" id="systemName" placeholder="Введите имя системы, например J105443">
<button onclick="loadWH()">Загрузить данные</button>

<div id="info">Здесь будет информация о системе</div>

<script>
async function fetchWHInfo(systemName) {
    const infoDiv = document.getElementById('info');
    infoDiv.innerHTML = 'Загрузка...';

    const url = `https://eveok.ru/wh/${systemName}`;

    try {
        const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
        const data = await response.json();
        const parser = new DOMParser();
        const doc = parser.parseFromString(data.contents, 'text/html');

        const row = doc.querySelector('table tbody tr');
        if (!row) {
            infoDiv.innerHTML = 'Система не найдена';
            return;
        }

        const cells = row.querySelectorAll('td');
        const whClass = cells[1]?.textContent.trim() || 'Unknown';
        const effects = cells[2]?.textContent.trim() || 'None';
        const statics = cells[3]?.textContent.trim() || 'None';

        infoDiv.innerHTML = `
            <b>Класс WH:</b> ${whClass}<br>
            <b>Эффект:</b> ${effects}<br>
            <b>Статики:</b> ${statics}
        `;
    } catch (err) {
        console.error(err);
        infoDiv.innerHTML = 'Ошибка загрузки данных';
    }
}

function loadWH() {
    const systemInput = document.getElementById('systemName');
    let name = systemInput.value.trim();
    if(!name) return alert('Введите имя системы');
    fetchWHInfo(name);
}
</script>

</body>
</html>
